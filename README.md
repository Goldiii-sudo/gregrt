# Telegram Bot для генерации изображений с NVIDIA FLUX.1

Бот на Python с использованием aiogram 3.x для генерации изображений через NVIDIA API.

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Убедитесь, что файл `.env` содержит ваши токены (уже настроен).

## Запуск

### Windows:
Просто запустите `start.bat` двойным кликом

### Linux/Mac:
```bash
python main.py
```

## Использование

1. Запустите бота командой `/start`
2. Отправьте текстовое описание изображения
3. Дождитесь генерации и получите результат

## Новые возможности

### История сообщений
Бот теперь сохраняет историю ваших диалогов с текстовыми моделями (15-20 последних сообщений). Это позволяет моделям:
- Помнить контекст предыдущих сообщений
- Отвечать с учетом всей беседы
- Поддерживать связный диалог

История сохраняется отдельно для каждой модели.

### Команды
- `/clear` - Очистить историю сообщений для текущей модели
- `/model` - Выбрать модель для генерации
- `/limits` - Посмотреть оставшиеся лимиты

## Структура проекта

```
├── main.py              # Точка входа, запуск бота
├── config.py            # Конфигурация и константы
├── handlers.py          # Обработчики команд и сообщений
├── ai_generator.py      # Генерация текста и изображений
├── user_manager.py      # Управление пользователями и лимитами
├── web_search.py        # Поиск в интернете
├── keyboards.py         # Клавиатуры для бота
├── states.py            # FSM состояния
├── start.bat            # Батник для запуска (Windows)
└── user_data.json       # База данных пользователей
```

## Примеры промптов

- "Кот в космосе среди звёзд"
- "Футуристический город на закате"
- "Портрет робота в стиле ренессанс"
